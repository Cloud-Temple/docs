# Scripts Cloud Temple Documentation

Ce dossier contient les scripts d'automatisation pour la g√©n√©ration et la maintenance de la documentation Cloud Temple.

## üìã Liste des Scripts

### üöÄ `generate_models_doc.py`
**G√©n√©rateur automatique de documentation LLMaaS**

G√©n√®re automatiquement la documentation Markdown des mod√®les LLM as a Service √† partir du fichier de configuration YAML.

#### Utilisation
```bash
# Via Python directement
python scripts/generate_models_doc.py

```

#### Fonctionnalit√©s
- ‚úÖ **36 mod√®les** automatiquement document√©s
- ‚úÖ **Formatage Docusaurus** avec m√©tadonn√©es
- ‚úÖ **Logging color√©** avec indicateurs de progression
- ‚úÖ **Gestion d'erreurs** robuste
- ‚úÖ **Types Python** pour la qualit√© du code
- ‚úÖ **Documentation auto-g√©n√©r√©e** avec timestamp

#### Source et Sortie
- **Entr√©e** : `memory-bank/models_config.yaml`
- **Sortie** : `docs/llmaas/models.md`

#### Exemple de sortie
```bash
üöÄ G√©n√©rateur de Documentation LLMaaS Cloud Temple
============================================================

‚ÑπÔ∏è Lecture du fichier memory-bank/models_config.yaml
‚úÖ Configuration charg√©e: 36 mod√®les trouv√©s
‚ÑπÔ∏è üî® G√©n√©ration de la documentation en cours...
‚úÖ Documentation g√©n√©r√©e : docs/llmaas/models.md
‚ÑπÔ∏è üìä 6 mod√®les de grande taille
‚ÑπÔ∏è üîß 34 mod√®les sp√©cialis√©s
‚ÑπÔ∏è üéØ 6 cas d'usage document√©s

üéâ Documentation g√©n√©r√©e avec succ√®s !
```

---

### üêç `translate_py/translate.py` (Recommand√©)
**Syst√®me de traduction moderne avec d√©tection intelligente des changements**

Syst√®me de traduction Python avanc√© utilisant l'API Cloud Temple LLMaaS avec une interface utilisateur moderne, d√©tection automatique des changements par hash SHA-256, et gestion optimis√©e de la concurrence.

#### ‚ú® Fonctionnalit√©s Avanc√©es
- üé® **Interface Rich** : Affichage moderne avec barres de progression en temps r√©el
- ‚ö° **Concurrence optimis√©e** : Pool de workers pour utilisation maximale de l'API
- üìä **Statistiques avanc√©es** : Tokens IN/OUT, vitesse tokens/s en temps r√©el
- üîç **D√©tection intelligente** : Hash SHA-256 pour d√©tecter les fichiers modifi√©s
- üö´ **Support .notranslation** : Exclusion automatique de r√©pertoires
- üîÑ **D√©tection automatique** : Racine du projet d√©tect√©e automatiquement
- üìã **M√©tadonn√©es intelligentes** : Traduction incr√©mentale optimis√©e
- üéØ **Mode debug** : Logs d√©taill√©s avec comparaison des hash
- ‚úÖ **Mode initialisation** : G√©n√©ration et gestion des m√©tadonn√©es

#### Installation et Configuration
```bash
# Installation des d√©pendances
cd scripts/translate_py
pip install -r requirements.txt

# Configuration (copier depuis .env.example)
cp .env.example .env
# √âditer .env avec vos param√®tres
```

#### Variables d'environnement (.env)
```bash
# API Configuration
CLOUDTEMPLE_API_KEY=your_api_key_here
CLOUDTEMPLE_API_URL=https://api.ai.cloud-temple.com/v1/chat/completions
TRANSLATION_MODEL=qwen3:30b-a3b

# Performance Settings
CONCURRENT_TRANSLATIONS=8         # Nombre de traductions simultan√©es
MAX_TOKENS_PER_BLOCK=5000        # Taille max des blocs de traduction
MAX_RETRIES=5                    # Nombre de tentatives par traduction
RETRY_DELAY=5.0                  # D√©lai entre tentatives (secondes)

# Model Parameters
TRANSLATION_TEMPERATURE=0.1      # Cr√©ativit√© du mod√®le (0.0-2.0)
TRANSLATION_TOP_P=1.0           # Nucleus sampling (0.0-1.0)
```

#### Utilisation
```bash
# Depuis le r√©pertoire racine ou scripts/translate_py/
python translate.py [OPTIONS]

# Exemples d'utilisation
python translate.py --dry-run                    # Simulation
python translate.py --force                      # Force retraduction
python translate.py --lang=en                    # Traduction anglaise uniquement
python translate.py --debug                      # Mode debug avec logs d√©taill√©s
python translate.py --test-api                   # Test de connexion API
```

#### Options Disponibles
- `--dry-run` : Mode simulation sans modifications
- `--force` : Force la retraduction de tous les fichiers
- `--init` : Mode initialisation des m√©tadonn√©es
- `--translate-missing` : Traduit seulement les fichiers manquants
- `--lang=<code>` : Langue cible sp√©cifique (en, de, es, it)
- `--debug` : Mode debug avec logs d√©taill√©s
- `--no-debug-system-prompt` : Masque le prompt syst√®me en debug
- `--test-api` : Test la connexion API et affiche le r√©sultat

#### Fonctionnalit√© .notranslation
Placez un fichier `.notranslation` dans un r√©pertoire pour forcer la **copie** (au lieu de la traduction) de tous les fichiers de ce r√©pertoire :

```bash
# Exemple : Licences LLM non traduisibles
docs/llmaas/licences/.notranslation

# R√©sultat : Tous les .md dans licences/ sont copi√©s identiques
# dans toutes les langues au lieu d'√™tre traduits
```

#### Interface Utilisateur
L'interface moderne affiche en temps r√©el :
```
üá´üá∑ Cloud Temple Documentation Translation üåç

üìã Configuration
üó£Ô∏è Langues Cibles

‚è±Ô∏è 00:02:45 | üöÄ PRODUCTION | üó£Ô∏è en, de, es, it

üìä Progression          ‚îÇ üìà Statistiques
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ‚îÇ ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üåç Progression Globale   ‚îÇ ‚úÖ Traduits    : 42
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë 78%     ‚îÇ üìã Copi√©s     : 8
                        ‚îÇ ‚ùå √âchecs     : 0
api.md ‚Üí en             ‚îÇ 
‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë 3/4        ‚îÇ üî§ Tokens IN  : 125,847
                        ‚îÇ üì§ Tokens OUT : 98,342
üìù Logs R√©cents          ‚îÇ ‚ö° Tokens/s   : 1,247.3
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ‚îÇ
‚úÖ Traduction: api.md ‚Üí en
üîÑ Traduction: concepts.md ‚Üí de
```

#### Workflow de D√©tection des Changements

**1. Mode Initialisation** (`--init`)
```bash
# G√©n√®re les m√©tadonn√©es pour la premi√®re fois
python translate.py --init

# Initialise ET traduit les fichiers manquants
python translate.py --init --translate-missing
```

**2. D√©tection Automatique**
```bash
# V√©rifie quels fichiers ont chang√©
python translate.py --dry-run --debug

# Exemple de sortie :
# [DRY RUN] Contenu modifi√©: llmaas/concepts.md ‚Üí en
#   Hash actuel : 66e0869319196d8d3009c79c3e994e9d4c736677962502ffb5ded09d637284be
#   Hash stock√© : 99033f972d83789a35fb75077e53e170df0b14b9fd465ecdbd691bdacdca2b74
```

**3. Traduction Intelligente**
```bash
# Traduit uniquement les fichiers modifi√©s
python translate.py

# Les hash sont automatiquement mis √† jour apr√®s traduction r√©ussie
```

#### Architecture du Syst√®me
```
scripts/translate_py/
‚îú‚îÄ‚îÄ translate.py              # üöÄ Script principal
‚îú‚îÄ‚îÄ config.py                # ‚öôÔ∏è Configuration et environnement
‚îú‚îÄ‚îÄ models.py                # üìã Mod√®les de donn√©es
‚îú‚îÄ‚îÄ ui.py                   # üé® Interface utilisateur Rich
‚îú‚îÄ‚îÄ translator.py            # üåê Moteur de traduction
‚îú‚îÄ‚îÄ file_manager.py          # üìÅ Gestion fichiers et m√©tadonn√©es
‚îú‚îÄ‚îÄ translation-meta.json    # üîç M√©tadonn√©es et hash SHA-256
‚îú‚îÄ‚îÄ requirements.txt         # üì¶ D√©pendances Python
‚îú‚îÄ‚îÄ .env.example            # üìù Template configuration
‚îî‚îÄ‚îÄ .env                   # üîí Configuration locale
```

#### D√©tection des Changements par Hash SHA-256

Le syst√®me utilise des **hash SHA-256** pour une d√©tection pr√©cise :

**‚úÖ Fichier modifi√©** : Hash diff√©rent ‚Üí Traduction n√©cessaire
```
Hash stock√© : 99033f972d83789a35fb75077e53e170df0b14b9fd465ecdbd691bdacdca2b74
Hash actuel : 66e0869319196d8d3009c79c3e994e9d4c736677962502ffb5ded09d637284be
‚Üí TRADUCTION REQUISE
```

**‚úÖ Fichier inchang√©** : Hash identique ‚Üí Ignore
```
Hash stock√© : 99033f972d83789a35fb75077e53e170df0b14b9fd465ecdbd691bdacdca2b74
Hash actuel : 99033f972d83789a35fb75077e53e170df0b14b9fd465ecdbd691bdacdca2b74
‚Üí AUCUNE ACTION
```

**Avantages** :
- ‚úÖ **Pr√©cision absolue** : D√©tecte le moindre changement
- ‚ö° **Performance optimale** : √âvite les traductions inutiles
- üîí **Int√©grit√©** : Garantit la coh√©rence des traductions
- üìä **Tra√ßabilit√©** : Logs d√©taill√©s des d√©cisions

---

### üåê `oldies/translate.js` (Legacy - Archiv√©)
**Script de traduction multilingue avec Cloud Temple LLMaaS**

> ‚ö†Ô∏è **Archiv√©** : Script d√©plac√© dans `oldies/`. Utilisez `translate_py/translate.py` pour toutes les nouvelles traductions.

Script Node.js legacy pour la traduction automatique de la documentation Markdown (fichiers `.md`) du fran√ßais vers d'autres langues en utilisant l'API Cloud Temple LLMaaS. **Ce script est d√©sormais archiv√© et remplac√© par le syst√®me Python moderne.**

#### Configuration Requise

Avant d'utiliser le script, vous devez configurer vos identifiants d'API et d'autres param√®tres via un fichier `.env` plac√© √† la racine de votre projet Docusaurus. Un fichier d'exemple `scripts/.env.example` est fourni. Copiez-le en `.env` √† la racine et modifiez les valeurs :

```bash
cp scripts/.env.example .env
# Ensuite, √©ditez .env avec vos informations
```

**Variables d'environnement principales :**
- `CLOUDTEMPLE_API_KEY`: (Obligatoire) Votre cl√© API pour le service Cloud Temple LLMaaS.
- `CLOUDTEMPLE_API_URL`: (Optionnel) URL de l'API LLMaaS. Par d√©faut : `https://api.ai.cloud-temple.com/v1/chat/completions`.
- `TRANSLATION_MODEL`: (Optionnel) Mod√®le LLM √† utiliser. Par d√©faut : `Qwen/Qwen3-30B-A3B-FP8`.
- `CONCURRENT_TRANSLATIONS`: (Optionnel) Nombre de fichiers √† traiter en parall√®le. Par d√©faut : `4`.
- `TRANSLATION_TEMPERATURE`: (Optionnel) Temp√©rature pour la g√©n√©ration. Par d√©faut : `1`.
- `TRANSLATION_TOP_P`: (Optionnel) Top_p pour la g√©n√©ration (nucleus sampling). Par d√©faut : `1`.
- `DOC_BASE_PATH`: (Optionnel) Chemin de base de la documentation si le script n'est pas lanc√© depuis la racine. Par d√©faut : `.`

#### Utilisation

Ex√©cutez le script depuis la racine de votre projet Docusaurus :
```bash
node scripts/translate.js [options]
```

#### Options de Ligne de Commande
- `--dry-run`: Simule l'ex√©cution sans modifier de fichiers ni appeler l'API. Affiche ce qui serait fait.
- `--force`: Force la retraduction de tous les fichiers, m√™me s'ils semblent √† jour.
- `--init`: Mode initialisation. Calcule et stocke les hachages des fichiers sources fran√ßais existants dans `translation-meta.json` sans traduire. Si des traductions existent d√©j√†, leur hachage est associ√© au source fran√ßais actuel.
    - `--init --translate-missing`: En mode initialisation, traduit √©galement les fichiers pour lesquels une traduction n'existe pas encore.
- `--translate-missing`: En mode de traduction normal (pas `--init`), traduit uniquement les fichiers pour lesquels une traduction n'existe pas encore, sans v√©rifier les hachages des traductions existantes.
- `--lang=<code>`: Cible une langue sp√©cifique pour la traduction (ex: `--lang=en`). `<code>` peut √™tre `en`, `de`, `es`, `it`.

#### Langues Support√©es
- üá´üá∑ **Fran√ßais** (langue source, depuis le dossier `docs/`)
- üá¨üáß **Anglais** (code: `en`)
- üá©üá™ **Allemand** (code: `de`)
- üá™üá∏ **Espagnol** (code: `es`)
- üáÆüáπ **Italien** (code: `it`)

Les traductions sont plac√©es dans `i18n/<code>/docusaurus-plugin-content-docs/current/`.

#### Fonctionnement
1.  Le script scanne le dossier `docs/`.
2.  Pour chaque fichier `.md`, il calcule un hachage de son contenu.
3.  Il compare ce hachage avec celui stock√© dans `scripts/translation-meta.json` pour chaque langue cible.
4.  Si un fichier a √©t√© modifi√© (hachage diff√©rent) ou si la traduction est manquante (et que l'option appropri√©e est utilis√©e), le contenu est envoy√© √† l'API Cloud Temple LLMaaS pour traduction.
5.  La traduction est sauvegard√©e dans le dossier `i18n/` correspondant.
6.  Le nouveau hachage du fichier source est enregistr√© dans `translation-meta.json`.
7.  Les fichiers non `.md` sont copi√©s dans les dossiers `i18n/` respectifs s'ils n'existent pas ou s'ils sont diff√©rents.

---

## üîß Configuration NPM

Les scripts sont int√©gr√©s dans `package.json` pour faciliter l'utilisation :

```json
{
  "scripts": {
    "generate:models": "python scripts/generate_models_doc.py",
    "generate:docs": "npm run generate:models"
  }
}
```

## üìÅ Architecture des Fichiers

```
scripts/
‚îú‚îÄ‚îÄ README.md                    # üìã Ce fichier
‚îú‚îÄ‚îÄ generate_models_doc.py       # üöÄ G√©n√©rateur LLMaaS
‚îî‚îÄ‚îÄ translate_py/                # üêç Syst√®me de traduction moderne
    ‚îú‚îÄ‚îÄ translate.py             # üöÄ Script principal
    ‚îú‚îÄ‚îÄ translation-meta.json    # üîç M√©tadonn√©es et hash SHA-256
    ‚îú‚îÄ‚îÄ config.py               # ‚öôÔ∏è Configuration
    ‚îú‚îÄ‚îÄ models.py               # üìã Mod√®les de donn√©es
    ‚îú‚îÄ‚îÄ ui.py                   # üé® Interface utilisateur
    ‚îú‚îÄ‚îÄ translator.py           # üåê Moteur de traduction
    ‚îú‚îÄ‚îÄ file_manager.py         # üìÅ Gestion fichiers
    ‚îú‚îÄ‚îÄ requirements.txt        # üì¶ D√©pendances
    ‚îú‚îÄ‚îÄ .env.example           # üìù Template config
    ‚îî‚îÄ‚îÄ .env                   # üîí Configuration locale

oldies/
‚îî‚îÄ‚îÄ translate.js                 # üåê Script Node.js archiv√©
```

## üéØ Workflow de Documentation

### G√©n√©ration LLMaaS
1. **√âditer** : `memory-bank/models_config.yaml`
2. **G√©n√©rer** : `npm run generate:models`
3. **V√©rifier** : Documentation mise √† jour dans `docs/llmaas/models.md`

### Processus de Traduction
1. **Source** : Cr√©er contenu en fran√ßais dans `/docs/`
2. **Traduire** : `python scripts/translate_py/translate.py`
3. **V√©rifier** : Contenu traduit dans `/i18n/[langue]/`

## üêç D√©pendances Python

Le script `generate_models_doc.py` n√©cessite :

```bash
# D√©pendances requises
pip install pyyaml

# Ou via requirements.txt (√† cr√©er si n√©cessaire)
pip install -r requirements.txt
```

## üîç D√©pannage

### Erreurs communes

#### `FileNotFoundError: models_config.yaml`
```bash
# V√©rifier que le fichier existe
ls memory-bank/models_config.yaml

# S'assurer d'√™tre dans le bon r√©pertoire
cd /path/to/docs/
npm run generate:models
```

#### `ModuleNotFoundError: No module named 'yaml'`
```bash
# Installer PyYAML
pip install pyyaml
```

#### `Permission denied`
```bash
# Rendre le script ex√©cutable
chmod +x scripts/generate_models_doc.py
```

### Validation de sortie

Le fichier g√©n√©r√© `docs/llmaas/models.md` doit contenir :
- ‚úÖ En-t√™te Docusaurus avec m√©tadonn√©es
- ‚úÖ Avertissement de g√©n√©ration automatique
- ‚úÖ Statistiques globales (36 mod√®les)
- ‚úÖ Sections "Mod√®les de Grande Taille" et "Mod√®les Sp√©cialis√©s"
- ‚úÖ Cas d'usage recommand√©s
- ‚úÖ Informations de g√©n√©ration en pied de page

## üìä M√©triques de Performance

### Script generate_models_doc.py
- **Temps d'ex√©cution** : < 5 secondes
- **Fichiers trait√©s** : 1 YAML ‚Üí 1 Markdown
- **Taille sortie** : ~150KB (36 mod√®les document√©s)
- **Encoding** : UTF-8 (support multilingue)

## üöÄ √âvolutions Futures

### Prochaines fonctionnalit√©s planifi√©es
- [ ] **G√©n√©ration API** : Script pour `api.md` depuis OpenAPI spec
- [ ] **G√©n√©ration use-cases** : Script pour `use-cases.md` depuis YAML
- [ ] **Validation automatique** : V√©rification coh√©rence YAML
- [ ] **CI/CD Integration** : Hooks Git pour g√©n√©ration automatique
- [ ] **Template engine** : Support de templates Jinja2 personnalisables

### Am√©liorations en cours
- [ ] **Requirements.txt** : D√©pendances Python formalis√©es
- [ ] **Unit tests** : Tests automatis√©s pour les scripts
- [ ] **Configuration** : Fichier de config central pour tous les scripts
- [ ] **Logging** : Logs persistants pour debug

## üìû Support

Pour toute question sur les scripts :

1. **Documentation** : Consulter ce README
2. **Issues** : Cr√©er une issue dans le repository
3. **Logs** : V√©rifier la sortie color√©e des scripts
4. **Team** : Contacter l'√©quipe Cloud Temple Documentation

---

## üéâ Contribution

### Ajouter un nouveau script

1. **Cr√©er** : `scripts/nouveau_script.py`
2. **Documenter** : Ajouter docstrings et types
3. **Tester** : V√©rifier le bon fonctionnement
4. **Int√©grer** : Ajouter dans `package.json`
5. **Documenter** : Mettre √† jour ce README

### Standards de code

- **Python** : Suivre PEP 8, utiliser type hints
- **JavaScript** : Suivre ESLint, utiliser JSDoc
- **Documentation** : Docstrings compl√®tes
- **Logs** : Utiliser les couleurs pour la lisibilit√©
- **Erreurs** : Gestion robuste avec messages clairs

---

*Derni√®re mise √† jour : 05/06/2025*
*Scripts maintenus par l'√©quipe Cloud Temple Documentation*
